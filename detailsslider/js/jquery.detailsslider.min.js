(function($){$.fn.extend({detailsslider:function(options){var defaults={levels:[],levelTips:[],leftLabel:"No Details",rightLabel:"Max Details",width:300,defaultLevel:0,qtip:true};var opts=defaults;if(options)opts=$.extend(defaults,options);var slider=$(this);slider.css("width",opts.width);initializeSlider();this.slider=function(){return slider};function initializeSlider(){slider.slider({value:opts.defaultLevel,min:0,max:opts.levels.length,step:1,slide:function(event,ui){updateDisplay(ui.value)}});
updateDisplay(slider.slider("value"));addLabels();addNotches();if(opts.levelTips.length>0&&opts.qtip)addTooltips()}function addLabels(){slider.after('<span class="slider-label left-end"></span>');slider.after('<span class="slider-label right-end"></span>');var leftEnd=$("span.left-end");var rightEnd=$("span.right-end");leftEnd.html(opts.leftLabel);rightEnd.html(opts.rightLabel);leftEnd.css("left",slider.position().left);rightEnd.css("left",slider.position().left+slider.width()-rightEnd.width())}function addNotches(){var notchHtml=
'<span class="notch"></span>';var numLevels=opts.levels.length;for(var index=1;index<numLevels;index++){var notch=$(notchHtml);var cssLeft=Math.floor(100/numLevels)*index;notch.css("left",cssLeft+"%");slider.append(notch)}}function addTooltips(){var handle=slider.find(".ui-slider-handle");handle.qtip({content:"",show:{delay:0,when:{event:"showtip"},effect:{type:"fade",length:100}},hide:{delay:0,when:{event:"hidetip"},effect:{type:"fade",length:100}},position:{corner:{target:"topMiddle",tooltip:"bottomMiddle"}},
style:{color:"#999",fontSize:"0.8em",padding:"3px 4px 3px 4px",tip:{corner:"bottomMiddle",color:"#ddd",size:{x:15,y:8}},border:{width:1,radius:2,color:"#ddd"}}});slider.bind("slidechange",showTip);slider.bind("slide",showTip);function showTip(event,ui){var qtip=$(".qtip");if(!qtip.is(":visible"))setTimeout(function(){handle.qtip("show");handle.trigger("showtip");handle.qtip("api").updateContent(opts.levelTips[slider.slider("value")])},100);else setTimeout(function(){handle.qtip("api").updateContent(opts.levelTips[slider.slider("value")])},
100)}slider.bind("focusout",function(event,ui){handle.qtip("hide");handle.trigger("hidetip")})}function updateDisplay(level){for(var index=0;index<=level;index++)$(opts.levels[index]).show();for(var index=level;index<opts.levels.length;index++)$(opts.levels[index]).hide()}return this}})})(jQuery);
